<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />

    <!-- FA Icon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- AOS Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

    <!-- Icon -->
    <link rel="icon" href="/assets/favicon.ico" />

    <!-- My Style -->
    <link rel="stylesheet" href="./style/main.css" />
    <link rel="stylesheet" href="./style/home.css" />

    <title>Aplikasi Penentuan Penerima BLT Minahasa Tenggara</title>

    <style>
      .text-primary {
        color: #4682b4 !important;
      }

      .btn-primary {
        color: #ffffff;
        background-color: #4682b4;
        border-color: #4682b4;
      }

      .btn-primary:hover {
        color: #ffffff;
        background-color: #4682b4;
        border-color: #4682b4;
      }

      .btn-primary:focus,
      .btn-primary.focus {
        box-shadow: 0 0 0 0.2rem rgba(91, 194, 194, 0.5);
      }

      .btn-primary.disabled,
      .btn-primary:disabled {
        color: #ffffff;
        background-color: #4682b4;
        border-color: #4682b4;
      }

      .btn-primary:not(:disabled):not(.disabled):active,
      .btn-primary:not(:disabled):not(.disabled).active,
      .show > .btn-primary.dropdown-toggle {
        color: #ffffff;
        background-color: #9cdada;
        border-color: #2e7c7c;
      }

      .btn-primary:not(:disabled):not(.disabled):active:focus,
      .btn-primary:not(:disabled):not(.disabled).active:focus,
      .show > .btn-primary.dropdown-toggle:focus {
        box-shadow: 0 0 0 0.2rem rgba(91, 194, 194, 0.5);
      }

      .btn-outline-primary {
        color: #4682b4;
        background-color: transparent;
        background-image: none;
        border-color: #4682b4;
      }

      .btn-outline-primary:hover {
        color: #ffffff;
        background-color: #4682b4;
        border-color: #4682b4;
      }

      .btn-outline-primary:focus,
      .btn-outline-primary.focus {
        box-shadow: 0 0 0 0.2rem rgba(119, 204, 204, 0.5);
      }

      .btn-outline-primary.disabled,
      .btn-outline-primary:disabled {
        color: #4682b4;
        background-color: transparent;
      }

      .btn-outline-primary:not(:disabled):not(.disabled):active,
      .btn-outline-primary:not(:disabled):not(.disabled).active,
      .show > .btn-outline-primary.dropdown-toggle {
        color: #ffffff;
        background-color: #4682b4;
        border-color: #4682b4;
      }

      .btn-outline-primary:not(:disabled):not(.disabled):active:focus,
      .btn-outline-primary:not(:disabled):not(.disabled).active:focus,
      .show > .btn-outline-primary.dropdown-toggle:focus {
        box-shadow: 0 0 0 0.2rem rgba(119, 204, 204, 0.5);
      }
    </style>
  </head>
  <body>
    <header><%- include('nav') %></header>

    <!-- <main style="padding-bottom: 15rem"> -->
    <main>
      <!-- <div class="container" style="padding-top: 3.5rem"></div> -->

      <!-- Error Toast -->
      <% if (notification.length > 0) { %>
      <div
        class="toast-container position-fixed bottom-0 end-0 p-3"
        data-aos="fade-down"
        data-aos-duration="750"
      >
        <div
          class="toast fade show"
          role="alert"
          aria-live="assertive"
          aria-atomic="true"
        >
          <div class="toast-header">
            <!-- <img src="..." class="rounded me-2" alt="..." /> -->
            <strong class="me-auto text-primary">Notifikasi</strong>
            <!-- <small>Just now.</small> -->
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="toast"
              aria-label="Close"
            ></button>
          </div>
          <div class="toast-body"><%= notification %></div>
        </div>
      </div>
      <% } %>

      <!-- Main Content -->
      <%- body %>

      <!-- Modal -->
      <section><%- include('../component/modal/keluarga/add') %></section>
    </main>

    <!-- <footer class="footer" style="position: absolute; bottom: 0; width: 100%"> -->
    <%- include('footer') %>
    <!-- </footer> -->

    <!-- AOS Script -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="/js/aos.js"></script>

    <!-- Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.plot.ly/plotly-3.0.1.min.js"
      charset="utf-8"
    ></script>
    <!-- <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->

    <!--  -->
    <% if (typeof signin !== 'undefined') { %>
    <script>
      var tempTitle = '<%- JSON.stringify(alternativesTitle) %>'
      var tempLabel = '<%- JSON.stringify(alternativesLabel) %>'
      var tempCount = '<%- JSON.stringify(alternativesCount) %>'

      const data = {
        titles: JSON.parse(tempTitle),
        labels: JSON.parse(tempLabel),
        counts: JSON.parse(tempCount),
      }

      data.titles.forEach((element, index) => {
        const xArray = data.labels[index]
        const yArray = data.counts[index]

        const layout = { title: element }

        const marker = {
          colors: [
            '#87CEEB',
            '#20B2AA',
            '#40E0D0',
            '#4682B4',
            '#B0C4DE',
            '#AFEEEE',
          ],
        }

        const chartData = [
          {
            labels: xArray,
            values: yArray,
            type: 'pie',
            marker,
          },
        ]

        const config = { displayModeBar: false }

        Plotly.newPlot(
          element.replace(/[^a-zA-Z]/g, '').toLowerCase(),
          chartData,
          layout,
          config,
          marker
        )
      })
    </script>
    <% } %>
  </body>
</html>
